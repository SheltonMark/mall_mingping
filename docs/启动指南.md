# åå°å¯åŠ¨æŒ‡å—

## âš ï¸ npm é—®é¢˜è¯´æ˜

æ‚¨çš„ç³»ç»Ÿ npm å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œæ— æ³•æ­£å¸¸å®‰è£…ä¾èµ–ã€‚è¯·ä½¿ç”¨ä»¥ä¸‹æ–¹æ¡ˆä¹‹ä¸€ï¼š

## è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1: å®‰è£… pnpmï¼ˆæ¨èï¼‰

```bash
# å…¨å±€å®‰è£… pnpm
npm install -g pnpm

# è¿›å…¥åç«¯ç›®å½•
cd code/backend-api

# å®‰è£…ä¾èµ–
pnpm install

# ç”Ÿæˆ Prisma Client
npx prisma generate

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm run start:dev
```

### æ–¹æ¡ˆ2: å®‰è£… yarn

```bash
# å…¨å±€å®‰è£… yarn
npm install -g yarn

# è¿›å…¥åç«¯ç›®å½•
cd code/backend-api

# å®‰è£…ä¾èµ–
yarn install

# ç”Ÿæˆ Prisma Client
npx prisma generate

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
yarn start:dev
```

### æ–¹æ¡ˆ3: ä¿®å¤ npm

```bash
# æ¸…ç† npm ç¼“å­˜
npm cache clean --force

# åˆ é™¤ node_modules
cd code/backend-api
rmdir /s /q node_modules

# åˆ é™¤ package-lock.json
del package-lock.json

# é‡æ–°å®‰è£…ï¼ˆä½¿ç”¨ --forceï¼‰
npm install --force

# ç”Ÿæˆ Prisma Client
npx prisma generate

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run start:dev
```

## æ•°æ®åº“é…ç½®

### 1. åˆ›å»º MySQL æ•°æ®åº“

```sql
CREATE DATABASE lemopx_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

### 2. é…ç½® .env æ–‡ä»¶

ç¼–è¾‘ `code/backend-api/.env` æ–‡ä»¶ï¼Œä¿®æ”¹æ•°æ®åº“è¿æ¥ï¼š

```env
DATABASE_URL="mysql://root:ä½ çš„å¯†ç @localhost:3306/lemopx_db"
JWT_SECRET="dev-jwt-secret-key-2024"
JWT_EXPIRATION="7d"
PORT=3001
NODE_ENV="development"
UPLOAD_DIR="./uploads"
MAX_FILE_SIZE=5242880
CORS_ORIGIN="http://localhost:3000"
```

### 3. åŒæ­¥æ•°æ®åº“

```bash
cd code/backend-api

# ç”Ÿæˆ Prisma Client
npx prisma generate

# åŒæ­¥æ•°æ®åº“è¡¨ç»“æ„
npx prisma db push

# ï¼ˆå¯é€‰ï¼‰æ‰“å¼€ Prisma Studio æŸ¥çœ‹æ•°æ®åº“
npx prisma studio
```

## å¯åŠ¨æœåŠ¡å™¨

```bash
cd code/backend-api

# å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
npm run start:dev
# æˆ–
pnpm run start:dev
# æˆ–
yarn start:dev

# æœåŠ¡å™¨å°†è¿è¡Œåœ¨: http://localhost:3001/api
```

## æµ‹è¯• API

### 1. æ³¨å†Œç®¡ç†å‘˜

```bash
curl -X POST http://localhost:3001/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "username": "admin",
    "email": "admin@lemopx.com",
    "password": "password123"
  }'
```

### 2. ç™»å½•

```bash
curl -X POST http://localhost:3001/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "admin",
    "password": "password123"
  }'
```

å°†è¿”å›çš„ `access_token` ç”¨äºåç»­è¯·æ±‚ã€‚

### 3. æµ‹è¯•å—ä¿æŠ¤çš„ç«¯ç‚¹

```bash
curl -X GET http://localhost:3001/api/auth/profile \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

## å¸¸è§é—®é¢˜

### Q1: ç«¯å£è¢«å ç”¨

ä¿®æ”¹ `.env` ä¸­çš„ `PORT=3001` ä¸ºå…¶ä»–ç«¯å£ã€‚

### Q2: æ•°æ®åº“è¿æ¥å¤±è´¥

- æ£€æŸ¥ MySQL æ˜¯å¦è¿è¡Œ
- æ£€æŸ¥ `.env` ä¸­çš„æ•°æ®åº“è¿æ¥ä¿¡æ¯
- ç¡®è®¤æ•°æ®åº“ `lemopx_db` å·²åˆ›å»º

### Q3: Prisma ç›¸å…³é”™è¯¯

```bash
# é‡æ–°ç”Ÿæˆ Prisma Client
npx prisma generate

# é‡æ–°åŒæ­¥æ•°æ®åº“
npx prisma db push
```

### Q4: TypeScript ç¼–è¯‘é”™è¯¯

```bash
# æ¸…ç†æ„å»º
rm -rf dist

# é‡æ–°æ„å»º
npm run build
```

## å®Œæ•´çš„å¯åŠ¨æµç¨‹ï¼ˆé¦–æ¬¡ï¼‰

```bash
# 1. å®‰è£…åŒ…ç®¡ç†å™¨ï¼ˆé€‰ä¸€ä¸ªï¼‰
npm install -g pnpm

# 2. è¿›å…¥åç«¯ç›®å½•
cd code/backend-api

# 3. å®‰è£…ä¾èµ–
pnpm install

# 4. é…ç½® .env æ–‡ä»¶ï¼ˆä¿®æ”¹æ•°æ®åº“è¿æ¥ï¼‰
# ç¼–è¾‘ .env æ–‡ä»¶

# 5. åˆ›å»ºæ•°æ®åº“
# åœ¨ MySQL ä¸­æ‰§è¡Œ: CREATE DATABASE lemopx_db;

# 6. ç”Ÿæˆ Prisma Client
npx prisma generate

# 7. åŒæ­¥æ•°æ®åº“
npx prisma db push

# 8. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm run start:dev

# 9. æ‰“å¼€æµè§ˆå™¨è®¿é—®
# http://localhost:3001/api
```

## æˆåŠŸæ ‡å¿—

å¦‚æœçœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼Œè¯´æ˜å¯åŠ¨æˆåŠŸï¼š

```
ğŸš€ Server is running on: http://localhost:3001/api
ğŸ“ Static files served from: /uploads/
```

## ä¸‹ä¸€æ­¥

å¯åŠ¨æˆåŠŸåï¼Œæ‚¨å¯ä»¥ï¼š
1. ä½¿ç”¨ Postman æˆ– curl æµ‹è¯• API
2. æŸ¥çœ‹ API æ–‡æ¡£ï¼š[docs/stage1-completion-report.md](../../docs/stage1-completion-report.md)
3. å¼€å§‹å¯¹æ¥å‰ç«¯
