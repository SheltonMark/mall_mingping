# LEMOPX 订单管理系统 - 需求文档 v2.0

## 📋 项目概述

### 项目背景
LEMOPX 是一家源头工厂，主营日用品（清洁工具，尤其是拖把等）。目前订单采用手写方式，需要将订单流程电子化，为业务员提供便捷的下单工具。

### 业务模式
- **B2B 业务员辅助下单系统**（非 B2C 电商）
- 业务员代客户下单（填写客户信息）
- **系统只有业务员和管理员使用**
- **❌ 不需要客户登录功能**
- **❌ 不需要在线支付功能**
- **❌ 不需要配送管理模块**
- **❌ 不需要库存管理模块**

### 核心目标
1. 从 ERP 导入产品数据
2. 简化业务员下单流程
3. 支持订单编辑和打印
4. 数字化管理订单数据

### 系统规模
- 并发用户：10-20 人（业务员）
- 商品数量：预计 50-200
- 订单量：预计 100-500/月

---

## 🔄 核心业务流程

### 产品管理流程 ⭐⭐ (2025-10-31更新)

```
1. 外部表格导入产品数据
   - 管理员上传产品表格（Excel格式）
   - 表格包含：品号、品名、商标、货品规格、附加属性等
   - 系统根据品号前缀自动分组（如 MP007-xxx 归为一组）

2. 系统自动解析和分组
   - 提取品号前缀作为产品分类
   - 品号前缀对照表：
     * MP - 组合套装
     * TB - 拖把类
     * T - 杆件
     * B - 拖把头
     * S - 刷类
     * CG - 玻璃&地刷类
     * CD - 除尘类
     * MB - 抹布类
     * QC - 车用类
     * CW - 宠物类
     * W - 外购类
   - 相同前缀的产品自动归为一个SKU组（如 MP007-清洁四件套、MP007-豪华套装）

3. 后台配置图片和视频 ⭐核心
   - 每种货品规格对应一套图片（最多5张）
   - 每个SKU可上传1个产品视频
   - 后台上传几张图片，前端就展示几张
   - 图片与规格一一对应，用户选择不同规格切换对应图片

4. 后台上架产品
   - 选择需要上架的SKU
   - 配置每个规格的图片集（1-5张）和视频
   - 填写销售单价
   - 设置上架状态

5. 前端展示
   - 按SKU组展示产品（如所有MP007-xxx合并显示为"MP007系列"）
   - 用户选择货品规格 → 切换对应的图片和视频
   - 从附加属性中提取颜色选项（每个部件可能有多种颜色）
```

### 下单流程

```
1. 业务员登录系统
2. 浏览商品/搜索商品
3. 进入产品详情页
4. 选择组件颜色
5. 选择数量
6. 加入购物车
7. 重复步骤2-6（支持多个产品一起下单）
8. 进入购物车确认商品
9. 进入下单页
10. 填写客户信息
11. 填写订单参数（数量、箱数、纸卡编码、摘要、预交日等）
12. 预览订单确认页
13. 打印订单（可选）
14. 提交订单
```

### 订单管理流程

```
1. 查看历史订单
2. 搜索/筛选订单
3. 编辑订单
   - 修改客户信息
   - 修改订单参数
   - 增删改商品
4. 打印订单
5. 导出订单表格
```

---

## 👥 用户角色

### 1. 业务员（主要用户）⭐

**权限：**
- 浏览商品
- 下单（填写客户信息和订单参数）
- 查看和编辑自己的订单
- 打印订单
- 导出订单

### 2. 管理员 ⭐

**权限：**
- 导入ERP产品表格
- 管理商品（上架/下架、填写单价）
- 创建和管理业务员账号
- 查看、编辑所有订单
- 打印和导出订单
- 系统配置

---

## 🎯 功能模块

## 一、前端系统（业务员使用）

### 1.1 登录
- 账号密码登录
- 记住密码
- 忘记密码（管理员后台重置）

### 1.2 首页 (2025-10-31更新)

**展示内容：**
- 公司 Logo 和品牌名称
- 语言切换按钮（中文/English）⭐⭐新增
- 轮播图/Banner
- **4个精选系列展示位** ⭐⭐核心功能
- 产品分类导航
- 快速搜索

**精选系列展示位：** ⭐⭐新增核心功能

**功能说明：**
- 首页展示4个精选SKU系列
- 每个展示位可独立配置
- 点击展示位跳转到对应SKU组的产品详情页

**展示位结构：**
```
┌────────────────────────────────────────┐
│  [精选系列展示位1]                     │
│  ┌──────────────────────────────────┐  │
│  │  [展示图片]                      │  │
│  │                                  │  │
│  ├──────────────────────────────────┤  │
│  │  MP007系列                       │  │ ← 系列名称
│  │  专业清洁套装 / Professional... │  │ ← 描述（支持中英文）
│  │  ¥99 - ¥159                      │  │ ← 价格区间
│  │  [查看详情]                      │  │ ← 跳转到 /products/MP007
│  └──────────────────────────────────┘  │
└────────────────────────────────────────┘

┌────────────────────────────────────────┐
│  [精选系列展示位2]                     │
│  ... TB009系列 → /products/TB009       │
└────────────────────────────────────────┘

┌────────────────────────────────────────┐
│  [精选系列展示位3]                     │
│  ... S001系列 → /products/S001         │
└────────────────────────────────────────┘

┌────────────────────────────────────────┐
│  [精选系列展示位4]                     │
│  ... MK008系列 → /products/MK008       │
└────────────────────────────────────────┘
```

**后台配置界面（在系统设置中）：**
```
首页精选系列配置：

展示位1:
├─ 选择SKU组: [下拉选择] MP007系列
├─ 展示图片: [上传图片] (1200x600px 推荐)
├─ 标题(中文): [输入框] "专业清洁套装"
├─ 标题(英文): [输入框] "Professional Cleaning Kit"
├─ 描述(中文): [文本框] "高效清洁，品质保证"
├─ 描述(英文): [文本框] "Efficient cleaning, quality assurance"
├─ 排序: [1]
└─ 状态: [✓ 启用]

展示位2:
├─ 选择SKU组: [下拉选择] TB009系列
...

展示位3:
├─ 选择SKU组: [下拉选择] S001系列
...

展示位4:
├─ 选择SKU组: [下拉选择] MK008系列
...
```

**跳转逻辑：**
- 用户点击展示位 → 跳转到 `/products/{sku_group_prefix}`
- 例如：点击 MP007系列 → 跳转到 `/products/MP007`
- 产品详情页显示该系列的所有规格、图片、视频

### 1.3 产品列表页 (2025-10-31更新)

**产品展示：**
- 产品网格展示（按SKU组）
- **显示SKU组代码**（如 MP007）⭐
- 显示SKU组主图（第一个规格的第一张图片）
- 显示价格区间（该SKU组下最低价-最高价）
- 显示规格数量标签（如"3种规格"）
- 快速添加按钮

**筛选功能：** ⭐⭐重新设计

**可用筛选（保留）：**

1. **分类筛选** ⭐核心筛选
   ```
   [全部分类]
   [MP - 组合套装] (15)
   [TB - 拖把类] (23)
   [T - 杆件] (8)
   [B - 拖把头] (12)
   [S - 刷类] (9)
   [CG - 玻璃&地刷类] (6)
   [CD - 除尘类] (5)
   [MB - 抹布类] (18)
   [QC - 车用类] (7)
   [CW - 宠物类] (4)
   [W - 外购类] (3)
   [MK - 马克笔类] (2) ← 自动创建的分类
   ```

2. **价格区间筛选** ⭐核心筛选
   ```
   筛选逻辑：按SKU组的最低价筛选

   [全部价格]
   [¥0 - ¥50] - 最低价在此区间的SKU组
   [¥50 - ¥100] - 最低价在此区间的SKU组
   [¥100 - ¥200] - 最低价在此区间的SKU组
   [¥200 - ¥500] - 最低价在此区间的SKU组
   [¥500以上] - 最低价在此区间的SKU组

   示例：
   MP007系列（规格A ¥99, 规格B ¥129, 规格C ¥159）
   → 最低价 ¥99 → 归入 [¥50-¥100] 区间

   产品卡片显示：¥99 - ¥159（完整价格区间）
   ```

3. **排序功能** ⭐
   ```
   [最新上架] - 按 created_at 降序
   [价格从低到高] - 按最低价升序
   [价格从高到低] - 按最低价降序
   [热门推荐] - 按 sort_order 升序
   ```

4. **搜索功能** ⭐
   ```
   搜索范围：
   - SKU组代码（如 MP007）
   - SKU组名称（如 MP007系列）
   - 品名（如 MP007-清洁四件套）
   - 品号（如 C10.01.0013）

   搜索逻辑：模糊匹配
   ```

**移除的筛选（与数据结构冲突）：**

❌ **材料筛选（木质/塑料/金属）**
```
原因：
- 产品从Excel导入，无单独"材料"字段
- 材料信息混在"附加属性"或"货品规格"中
- 格式不统一，无法提取和分类

替代方案：
- 通过"搜索"功能查找（如搜索"塑料"）
- 通过"分类筛选"（大部分产品同类材料相同）
```

❌ **颜色筛选（颜色圆圈）**
```
原因：
- 一个产品有多个部件，每个部件颜色不同
- 无法确定"主颜色"
- 例如：黑杆+白头+蓝布，筛选哪个颜色？

替代方案：
- 进入产品详情页后，查看所有部件颜色
- 通过"搜索"功能查找（如搜索"黑色"）
- 产品卡片显示"多色可选"标签
```

**产品卡片设计调整：**
```
┌─────────────────────────┐
│   [产品主图]            │
│                         │
├─────────────────────────┤
│ MP007                   │ ← SKU组代码
│ MP007系列               │ ← SKU组名称
│                         │
│ ¥99 - ¥159              │ ← 价格区间（最低-最高）
│ 3种规格可选             │ ← 规格数量
│                         │
│ [组合套装] [多色可选]   │ ← 分类标签 + 颜色标签
│                         │
│ [查看详情] [快速下单]   │
└─────────────────────────┘
```

**优化后的用户体验：**
1. 用户通过**分类**快速定位产品类型（核心筛选）
2. 用户通过**价格区间**筛选预算范围（核心筛选）
3. 用户通过**搜索**查找具体产品或属性（如"黑色"、"塑料"）
4. 用户通过**排序**调整展示顺序（最新、价格、热门）
5. 点击产品进入详情页，查看所有规格、颜色、图片、视频

### 1.4 产品详情页 ⭐核心 (2025-10-31更新)

**SKU组合与规格选择：**

产品按品号前缀分组（如 MP007-xxx），每个规格对应独立的图片集和视频。

**重要逻辑：品号前缀分组 + 规格切换** ⭐⭐

```
关键概念：
- 品号前缀相同的产品合并为一个SKU组
- 每个货品规格对应一套图片（1-5张）和1个视频
- 用户选择规格 → 切换对应图片和视频
- 颜色信息从"附加属性"字段提取

示例：
MP007-清洁四件套 (品号: MP007-001)
MP007-豪华套装 (品号: MP007-002)
→ 前端合并展示为"MP007系列"

货品规格示例（从表格导入）：
规格A:
  图片: [pic1.jpg, pic2.jpg, pic3.jpg]
  视频: video1.mp4
  附加属性: A棉嵌杆(意标规格) φ19/22*0.27mm*1200mm; B:四孔板+雪尼尔布头; C:塑件10C%灰...

规格B:
  图片: [pic4.jpg, pic5.jpg]
  视频: video2.mp4
  附加属性: A喷塑3C%灰+塑件10C%灰; B:塑件10C%灰,雪尼尔10C%灰+口袋布白色...

用户交互：
- 选择规格A → 显示规格A的图片集(3张) + 视频
- 选择规格B → 显示规格B的图片集(2张) + 视频
- 从附加属性提取颜色选项供用户选择
```

**功能：**
- **产品图片展示**（根据规格切换，1-5张灵活显示）⭐
- **产品视频播放**（每个规格独立视频）⭐新增
- **显示品号**（基于SKU前缀）⭐
- **货品规格选择器**（切换不同规格）⭐
- **Apple风格渐进式颜色选择**（从附加属性提取，丝滑动画）⭐⭐⭐新增核心功能
- 数量选择器
- 加入购物车 / 立即购买
- 产品描述

**Apple风格渐进式颜色选择体验** ⭐⭐⭐新增核心功能 (2025-11-01更新)

**用户选择流程：**
```
Step 1: 选择规格
┌──────────────────────────────────────────┐
│  选择您的 MP007 清洁套装                  │
│  ┌──────────┐  ┌──────────┐             │
│  │ 四件套    │  │ 六件套    │             │
│  │ ¥199     │  │ ¥259     │             │
│  └──────────┘  └──────────┘             │
│      ✓ 已选择                             │
└──────────────────────────────────────────┘
        ⬇ 渐显动画 (fade in + slide up)

Step 2: 选择部件A的颜色
┌──────────────────────────────────────────┐
│  [A] 伸缩铁杆                             │
│  规格: φ19/22*0.27mm*1200mm              │
│  ┌──────────────┐ ┌──────────────┐     │
│  │ 喷塑: 3C冷灰  │ │ 喷塑: 黑色    │     │
│  │ ● #B8BFC6    │ │ ● #000000    │     │
│  │ 塑件: 10C冷灰 │ │ 塑件: 白色    │     │
│  │ ● #D1D5D8    │ │ ● #FFFFFF    │     │
│  └──────────────┘ └──────────────┘     │
│      ✓ 已选择                             │
└──────────────────────────────────────────┘
        ⬇ 渐显动画 (继续下一个部件)

Step 3-N: 依次选择其他部件...
```

**关键特性：**
- ✅ 渐进式展示：选择完一个部件，下一个部件才渐显
- ✅ 丝滑动画：使用 Framer Motion 实现 Apple 风格动画
- ✅ 颜色可视化：显示 Pantone 色卡对应的颜色圆点
- ✅ 独立选择：每个部件的颜色方案可以独立选择（场景A）
- ✅ 多颜色方案：每个部件支持多种颜色配置（从Excel导入，用 | 分隔）

**附加属性Excel格式** (2025-11-01确认)：
```excel
附加属性（颜色）:
[A] 喷塑:3C冷灰+塑件:10C冷灰 | 喷塑:黑色+塑件:白色 | 喷塑:蓝色+塑件:白色
[B] 塑件:10C冷灰+雪尼尔:10C冷灰+口袋布:白色 | 塑件:白色+雪尼尔:蓝色+口袋布:白色
[C] 塑件:10C冷灰+TPR刮条:黑色 | 塑件:白色+TPR刮条:黑色
[D] 塑件:10C冷灰+雪尼尔:10C冷灰 | 塑件:白色+雪尼尔:蓝色
```

**解析规则：**
- 同一部件的多个颜色方案用 `|` 分隔（注：具体分隔符待ERP格式确认后调整）
- 同一方案内的多个颜色部位用 `+` 分隔
- 颜色格式：`材质部位:颜色代码`
- 颜色代码使用 Pantone 色卡转换为 HEX 颜色值显示

**前端技术实现：**
- 使用 Framer Motion 实现渐进式动画
- 使用 pantoneColors.ts 颜色映射库转换颜色
- 独立选择模式（不同部件可选不同方案）

**图片和视频管理规则：**
- 后台上传几张图片，前端就展示几张（最多5张）
- 每个规格必须至少有1张图片
- 视频为可选项（0或1个）
- 图片支持缩略图预览和大图查看

**移除：**
- ❌ 用户评分和评论区
- ❌ 推荐产品区

### 1.5 购物车页面 ⭐

**功能：**
- 商品列表展示（含组件颜色配置）
- **显示品号** ⭐
- 修改数量
- 删除商品
- 价格汇总
- 继续购物
- 去下单

### 1.6 下单页面 ⭐⭐核心页面

**客户信息（必填）：**
- 客户名称/公司名称
- 联系人
- 联系方式
- 收货地址

**订单参数（部分必填，部分选填）：**

**注意：完整字段列表后续提供**

当前已确认字段：
- 数量
- 箱数
- 纸卡编码（选填）
- 摘要（选填）
- 预交日（预计交货日期）
- 备注
- 其他订单字段...

**操作：**
- 预览订单
- 保存草稿
- 返回购物车

### 1.7 订单确认页 ⭐⭐核心页面

**功能：**
- 完整订单信息展示
- 可编辑所有信息（客户信息、订单参数、商品）
- **打印订单**（按模板格式）
- 提交订单

### 1.8 业务员工作台

**我的订单：**
- 查看历史订单
- 搜索/筛选订单
- 编辑订单
- 打印订单
- 导出订单
- 复制订单（快速重复下单）

**个人信息：**
- 查看和修改个人信息
- 修改密码

---

## 二、后台管理系统

### 2.1 管理员登录
- 账号密码登录
- 权限验证

### 2.2 仪表盘
- 今日订单数
- 本月订单数
- 订单趋势图
- 快捷操作入口

### 2.3 商品管理 ⭐核心 (2025-10-31更新)

#### 2.3.1 从外部表格导入产品 ⭐⭐核心中的核心

**导入流程：**
1. 管理员点击"导入产品"
2. 上传产品表格（Excel格式）
3. 系统自动解析表格并按品号前缀分组
4. 显示导入结果（成功/失败数量）
5. 产品默认为"未上架"状态

**表格格式（参考图1）：**
```
必需列：
- 备注 (系统状态标识，如"方案一"/"方案二")
- 创建日期 (YYYY-MM-DD格式)
- 品号 (SKU编码，如 C10.01.0013)
- 品名 (产品名称，如 MP007-清洁四件套)
- 商标 (品牌标识)
- 货品规格 (规格描述，支持多行文本)
- 附加属性 (颜色和部件信息，格式: A:...; B:...; C:...; D:...)

说明：
- 品号前缀自动提取（如 MP007、TB001、T001 等）
- 系统自动将相同前缀的产品归为一个SKU组
- 每行数据对应一个货品规格
```

**品号前缀分类对照表：**
```
MP - 组合套装 (如 MP007-清洁四件套)
TB - 拖把类 (如 TB001-平板拖把)
T - 杆件 (如 T001-伸缩杆)
B - 拖把头 (如 B001-旋转拖把头)
S - 刷类 (如 S001-清洁刷)
CG - 玻璃&地刷类 (如 CG001-玻璃刮)
CD - 除尘类 (如 CD001-除尘掸)
MB - 抹布类 (如 MB001-超细纤维抹布)
QC - 车用类 (如 QC001-洗车拖把)
CW - 宠物类 (如 CW001-宠物清洁刷)
W - 外购类 (如 W001-外购配件)
```

**导入后的数据处理：**
- 自动提取品号前缀并创建产品组
- 解析附加属性字段，提取部件和颜色信息
- 每个货品规格创建独立的SKU记录
- 所有SKU默认状态为"未上架"

#### 2.3.2 商品列表 (2025-10-31更新)

**功能：**
- 搜索商品（名称/品号/品号前缀）
- 按分类筛选（MP/TB/T/B/S/CG/CD/MB/QC/CW/W）
- 按状态筛选（已上架/未上架）
- **批量操作（批量上架/批量下架/删除）** ⭐
- 导入产品
- 导出商品

**显示信息：**
- SKU组缩略图（显示第一个规格的首张图片）
- SKU组名称（基于品号前缀，如"MP007系列"）
- 品号前缀分类标签
- 规格数量（该SKU组下有多少个规格）
- 价格区间（最低价-最高价）
- 状态（已上架/未上架）
- 多选框（用于批量操作）
- 操作按钮（编辑/配置图片视频/上架/下架）

**批量操作说明：**
- 选择多个SKU组
- 批量上架（需为每个规格填写单价）
- 批量下架
- 批量删除

#### 2.3.3 商品上架/编辑 (2025-10-31更新)

**核心功能：配置规格图片和视频** ⭐⭐

**可编辑信息：**
1. **基础信息**
   - 产品描述（可编辑）
   - 状态：上架/下架
   - 排序权重

2. **规格管理**（核心） ⭐⭐每个规格独立配置
   - 查看所有货品规格列表
   - **为每个规格填写/编辑销售单价**（必填）⭐⭐
   - **为每个规格配置/编辑图片集（1-5张）**⭐⭐
   - **为每个规格上传/编辑视频（可选，1个）**⭐
   - 设置图片显示顺序（拖拽排序）
   - 预览图片和视频效果
   - 删除图片
   - 替换图片
   - 删除视频
   - 替换视频

3. **图片和视频配置界面**
   ```
   SKU组视频设置：
   ├─ 视频复用模式: [○ 单独配置] [● SKU组共用]
   └─ 如果选择"SKU组共用"：
       ├─ [视频预览] [删除] [重新上传]
       └─ 所有规格共用此视频

   规格A: A棉嵌杆(意标规格) φ19/22*0.27mm*1200mm...
   ├─ 单价: ¥ [99.00] ⭐可编辑
   │
   ├─ 图片集 (已上传 3/5 张) ⭐可编辑
   │  ├─ [图1缩略图] [预览] [删除] [替换] [上移] [下移]
   │  ├─ [图2缩略图] [预览] [删除] [替换] [上移] [下移]
   │  ├─ [图3缩略图] [预览] [删除] [替换] [上移] [下移]
   │  └─ [+ 添加图片] (最多5张)
   │
   └─ 视频 (视频复用模式: SKU组共用) ⭐可编辑
      └─ 使用SKU组共用视频 ✓ [更换为独立视频]

   规格B: A喷塑3C%灰+塑件10C%灰...
   ├─ 单价: ¥ [129.00] ⭐可编辑
   │
   ├─ 图片集 (已上传 2/5 张) ⭐可编辑
   │  ├─ [图1缩略图] [预览] [删除] [替换] [上移] [下移]
   │  ├─ [图2缩略图] [预览] [删除] [替换] [上移] [下移]
   │  └─ [+ 添加图片] (最多5张)
   │
   └─ 视频 (视频复用模式: 单独配置) ⭐可编辑
      └─ [视频预览] [删除] [替换] 或 [使用SKU组共用视频]
   ```

**编辑操作说明：**
- **编辑单价**：点击单价输入框，直接修改，保存生效
- **添加图片**：点击"添加图片"按钮，选择文件上传
- **删除图片**：点击图片的"删除"按钮，确认后删除
- **替换图片**：点击图片的"替换"按钮，选择新文件替换
- **调整顺序**：拖拽图片或点击"上移/下移"按钮调整显示顺序
- **预览图片**：点击"预览"按钮，大图查看
- **删除视频**：点击"删除"按钮，确认后删除
- **替换视频**：点击"替换"按钮，选择新文件替换
- **切换视频模式**：在SKU组共用和独立视频之间切换

**图片上传规则：**
- 支持格式：JPG、PNG、WebP
- 单张图片最大：5MB
- 推荐尺寸：1200x1200px
- 每个规格至少1张，最多5张
- 后台上传几张，前端就显示几张

**视频上传规则：**
- 支持两种模式：**SKU组共用** 或 **单独配置**
  - **SKU组共用模式**：一个视频应用于该SKU组下所有规格（节省存储空间）
  - **单独配置模式**：每个规格可以上传独立的视频（更精准展示）
- 支持格式：MP4、WebM
- 最大文件：50MB
- 推荐分辨率：1920x1080
- 视频为可选项（可以不上传）
- 每个规格最多1个视频
- 自动生成视频缩略图
- 可随时切换复用模式

**不可编辑（来自导入表格）：**
- 品号(SKU)
- 品名
- 品号前缀分类
- 货品规格描述
- 附加属性

### 2.4 订单管理 ⭐核心

#### 2.4.1 订单列表

**筛选条件：**
- 下单时间范围
- 业务员
- 客户名称
- 订单号搜索

**显示信息：**
- 订单号
- 客户名称
- 业务员
- 下单时间
- 订单金额
- 操作（查看/编辑/打印/导出）

**批量操作：**
- 导出订单表格（Excel/CSV）
- 批量打印
- 批量删除

#### 2.4.2 订单详情/编辑 ⭐核心

**可查看和编辑的信息：**

1. 客户信息（可编辑）
   - 公司名称
   - 联系人
   - 联系方式
   - 收货地址

2. 订单参数（可编辑）
   - 数量
   - 箱数
   - 纸卡编码
   - 摘要
   - 预交日
   - 备注
   - 其他字段...

3. 商品明细（可编辑）
   - 商品列表
   - 组件配置详情（组件名 + 颜色）
   - 数量
   - 单价
   - 小计
   - 支持增删改商品

4. 价格信息
   - 商品总额
   - 订单总额

**操作按钮：**
- 保存修改
- 打印订单（按模板格式）
- 导出订单（Excel - 按模板格式）
- 删除订单

### 2.5 用户管理

#### 2.5.1 业务员管理

**功能：**
- 添加业务员（管理员专用）
- 编辑业务员信息
- 禁用/启用账号
- 重置密码
- 查看业务员订单统计

**信息字段：**
- 姓名
- 账号
- 手机号
- 邮箱
- 部门
- 状态

### 2.6 产品分类管理 ⭐核心 (2025-10-31更新)

**功能：**
- 添加/编辑/删除分类代码
- 分类排序
- 分类图标上传
- **自动识别新分类代码** ⭐⭐

**分类代码管理：**
- 系统预设11种分类代码（MP/TB/T/B/S/CG/CD/MB/QC/CW/W）
- 支持后台自定义新增分类代码
- 支持编辑分类代码的名称和图标
- 支持删除不需要的分类代码

**自动识别逻辑：** ⭐⭐核心
```
导入产品时：
1. 从品名提取前缀（如 "MK008-xxx" → 提取 "MK"）
2. 检查分类表是否存在该代码
   - 如果存在：自动归类到该分类
   - 如果不存在：
     a. 自动创建新分类代码 "MK"
     b. 分类名称默认为 "MK类"
     c. 提示管理员完善分类信息
3. 继续导入产品到对应分类组

示例：
- 导入品名 "MK008-清洁套装"
- 系统提取前缀 "MK"
- 分类表中没有 "MK"
- 自动创建分类：code="MK", name="MK类"
- 产品归入 "MK" 分类
- 管理员可后续编辑分类名称为"马克笔类"等
```

**分类管理界面：**
```
分类列表：
├─ MP - 组合套装 [编辑] [删除]
├─ TB - 拖把类 [编辑] [删除]
├─ T - 杆件 [编辑] [删除]
├─ MK - MK类 (新增，待完善) [编辑] [删除]
└─ [+ 新增分类代码]

编辑分类：
- 分类代码: MK (创建后不可修改)
- 分类名称: [输入框] 如"马克笔类"
- 分类图标: [上传图标]
- 排序权重: [数字]
```

**字段结构：**
```
categories 表：
- code (分类代码，唯一，如 "MK")
- name (分类名称，如 "马克笔类")
- icon (图标URL)
- sort_order (排序)
- is_auto_created (是否自动创建)
- created_at
```

### 2.7 系统设置 (2025-10-31更新)

**基础设置：**
- 网站名称（中文/英文）⭐新增
- Logo
- 联系方式
- 公司地址（中文/英文）⭐新增

**多语言设置：** ⭐⭐新增核心功能
```
语言配置：
├─ 默认语言: [中文]
├─ 支持语言: [✓ 中文] [✓ English]
└─ 语言切换方式: [顶部导航栏]

公司信息多语言：
├─ 公司名称(中文): "东阳市铭品日用品有限公司"
├─ 公司名称(英文): "Dongyang Mingpin Daily Products Co., Ltd."
├─ 公司简介(中文): [富文本编辑器]
├─ 公司简介(英文): [富文本编辑器]
├─ 地址(中文): "浙江省东阳市..."
└─ 地址(英文): "Dongyang City, Zhejiang Province..."
```

**首页设置：**
- 轮播图管理（支持中英文标题和描述）⭐更新
- **精选系列配置（4个展示位）** ⭐⭐新增核心功能

**精选系列展示位配置：**
```
展示位管理：

[+ 新增展示位] (最多4个)

展示位1:
├─ 选择SKU组: [下拉选择已上架SKU组] ⭐
│   └─ 选项: MP007系列, TB009系列, S001系列...
├─ 展示图片: [上传] (推荐尺寸: 1200x600px)
├─ 标题(中文): [专业清洁套装]
├─ 标题(英文): [Professional Cleaning Kit]
├─ 描述(中文): [高效清洁，品质保证]
├─ 描述(英文): [Efficient cleaning, quality assurance]
├─ 排序: [1] (控制显示顺序)
├─ 状态: [✓ 启用] [ ] 禁用
└─ [保存] [删除]

展示位2:
├─ 选择SKU组: [TB009系列]
...

[预览首页效果]
```

**关于我们页面设置：**
- 公司介绍（中文/英文）⭐更新
- 发展历程（中文/英文）⭐更新
- 企业文化（中文/英文）⭐更新
- 图片上传

---

## 三、数据结构 (2025-10-31更新)

### 核心数据模型说明

**重要：品号前缀分组 + 规格图片视频管理** ⭐⭐

```
方案：SKU组 + 规格变体 + 图片视频配置

product_groups (SKU组 - 按品号前缀分组)
  ├─ group_id: "MP007"
  ├─ group_name: "MP007系列"
  ├─ category_prefix: "MP" (组合套装)
  └─ specifications → (多个规格变体)
       ├─ 规格1: MP007-清洁四件套
       │    ├─ SKU: C10.01.0013
       │    ├─ 货品规格: 详细规格描述...
       │    ├─ 附加属性: A:...; B:...; C:...
       │    ├─ 图片集: [pic1, pic2, pic3] (3张)
       │    ├─ 视频: video1.mp4
       │    └─ 单价: ¥99.00
       │
       └─ 规格2: MP007-豪华套装
            ├─ SKU: C10.01.0014
            ├─ 货品规格: 详细规格描述...
            ├─ 附加属性: A:...; B:...; C:...
            ├─ 图片集: [pic4, pic5] (2张)
            ├─ 视频: (无)
            └─ 单价: ¥129.00

关键特性：
- 品号前缀相同的产品自动归为一个SKU组
- 每个规格有独立的图片集（1-5张）和视频（0-1个）
- 后台上传几张图片，前端就显示几张
- 用户选择规格时，切换对应的图片和视频
```

### 数据库表设计

#### 1. users (用户表)
```
- id (主键)
- username (账号，唯一)
- password (密码，加密)
- role (角色: admin/salesman)
- name (姓名)
- phone (手机号)
- email (邮箱)
- department (部门)
- status (状态: active/inactive)
- created_at
- updated_at
```

#### 2. product_groups (SKU组表 - 按品号前缀分组) ⭐新增
```
- id (主键)
- prefix (品号前缀，如 "MP007", "TB001")
- group_name (SKU组名称，如 "MP007系列")
- group_name_en (SKU组英文名称，如 "MP007 Series") ⭐⭐新增
- category_code (分类代码: MP/TB/T/B/S/CG/CD/MB/QC/CW/W)
- category_name (分类名称，如 "组合套装")
- description (产品描述 - 中文) ⭐更新
- description_en (产品描述 - 英文) ⭐⭐新增
- shared_video (SKU组共用视频 - JSON对象，可选) ⭐
- video_mode (视频模式: shared/individual - 共用/单独) ⭐
- min_price (最低价 - 计算字段，从关联的SKU规格中取最低价) ⭐⭐
- max_price (最高价 - 计算字段，从关联的SKU规格中取最高价) ⭐⭐
- spec_count (规格数量 - 计算字段，该组下有多少个规格) ⭐
- main_image (主图 - 第一个规格的第一张图片URL) ⭐
- sort_order (排序权重)
- status (状态: active/inactive)
- created_at
- updated_at
```

**计算字段更新逻辑：**
```
当任一规格的价格或图片发生变化时：
1. 重新计算 min_price（所有规格中的最低价）
2. 重新计算 max_price（所有规格中的最高价）
3. 更新 spec_count（统计该组下的规格数量）
4. 更新 main_image（取第一个规格的第一张图片）

示例：
MP007系列下有3个规格：
- 规格A：¥99.00，图片3张
- 规格B：¥129.00，图片2张
- 规格C：¥159.00，图片5张

→ min_price: 99.00
→ max_price: 159.00
→ spec_count: 3
→ main_image: 规格A的图片1
```

**shared_video字段结构示例：**
```json
{
  "url": "/uploads/videos/mp007-shared-video.mp4",
  "size": 15728640,
  "duration": 45,
  "thumbnail": "/uploads/videos/mp007-shared-thumb.jpg"
}
```

#### 3. product_skus (SKU规格表 - 存储每个货品规格) ⭐核心
```
- id (主键)
- group_id (SKU组ID - 外键) ⭐
- sku (SKU编码，如 "C10.01.0013" - 从表格导入)
- product_name (品名，如 "MP007-清洁四件套" - 从表格导入)
- brand (商标 - 从表格导入)
- specification (货品规格描述 - 从表格导入，支持多行文本)
- additional_attributes (附加属性 - 从表格导入，JSON格式) ⭐
- price (销售单价 - 后台填写)
- images (图片集 - JSON数组，后台上传，1-5张) ⭐⭐
- video (独立视频 - JSON对象，可选，仅当video_mode=individual时使用) ⭐
- use_shared_video (是否使用SKU组共用视频 - 布尔值) ⭐新增
- status (状态: active/inactive)
- import_date (导入时间)
- created_at
- updated_at
```

**使用视频的逻辑：**
```
如果 group.video_mode === 'shared':
  → 所有规格使用 group.shared_video

如果 group.video_mode === 'individual':
  如果 sku.use_shared_video === true:
    → 使用 group.shared_video
  否则:
    → 使用 sku.video (规格独立视频)
```

**additional_attributes字段结构示例：**
```json
{
  "raw": "A棉嵌杆(意标规格) φ19/22*0.27mm*1200mm; B:四孔板+雪尼尔布头; C:塑件10C%灰",
  "parsed": {
    "A": {
      "name": "棉嵌杆(意标规格)",
      "spec": "φ19/22*0.27mm*1200mm",
      "colors": []
    },
    "B": {
      "name": "四孔板+雪尼尔布头",
      "colors": []
    },
    "C": {
      "name": "塑件",
      "colors": ["10C%灰"]
    }
  }
}
```

**images字段结构示例：**
```json
[
  {
    "url": "/uploads/products/mp007-spec1-img1.jpg",
    "order": 1,
    "size": 1024000,
    "width": 1200,
    "height": 1200
  },
  {
    "url": "/uploads/products/mp007-spec1-img2.jpg",
    "order": 2,
    "size": 980000,
    "width": 1200,
    "height": 1200
  },
  {
    "url": "/uploads/products/mp007-spec1-img3.jpg",
    "order": 3,
    "size": 1150000,
    "width": 1200,
    "height": 1200
  }
]
```

**video字段结构示例：**
```json
{
  "url": "/uploads/videos/mp007-spec1-video.mp4",
  "size": 15728640,
  "duration": 45,
  "thumbnail": "/uploads/videos/mp007-spec1-thumb.jpg"
}
```

#### 4. orders (订单表)
```
- id (主键)
- order_no (订单号，唯一)
- salesman_id (业务员ID)
- customer_name (客户名称/公司名称)
- customer_contact (联系人)
- customer_phone (联系方式)
- customer_address (收货地址)
- total_amount (订单总额)
- quantity (数量)
- box_count (箱数)
- card_code (纸卡编码)
- summary (摘要)
- delivery_date (预交日)
- notes (备注)
- 【其他订单字段...待后续确认】
- created_at
- updated_at
```

#### 5. order_items (订单商品明细表)
```
- id (主键)
- order_id (订单ID)
- sku_id (SKU规格ID - 外键)
- product_name (品名，冗余存储)
- sku (SKU编码，冗余存储)
- specification (货品规格描述，冗余存储)
- selected_attributes (选择的附加属性，JSON - 如颜色选择)
- quantity (数量)
- unit_price (单价)
- subtotal (小计)
```

**selected_attributes示例：**
```json
{
  "A": {
    "name": "棉嵌杆(意标规格)",
    "selectedColor": null
  },
  "B": {
    "name": "四孔板+雪尼尔布头",
    "selectedColor": null
  },
  "C": {
    "name": "塑件",
    "selectedColor": "10C%灰"
  }
}
```

#### 6. categories (分类表) ⭐更新
```
- id (主键)
- code (分类代码，唯一，如 "MP", "MK")
- name (分类名称 - 中文，如 "组合套装", "马克笔类") ⭐更新
- name_en (分类名称 - 英文，如 "Combo Sets", "Marker Pen") ⭐⭐新增
- icon (图标URL)
- sort_order (排序)
- is_auto_created (是否自动创建，布尔值) ⭐
- created_at
```

**预设分类数据（支持中英文）：**
```
Code  |  中文名称        |  英文名称
------|-----------------|------------------
MP    |  组合套装        |  Combo Sets
TB    |  拖把类          |  Mops
T     |  杆件            |  Poles
B     |  拖把头          |  Mop Heads
S     |  刷类            |  Brushes
CG    |  玻璃&地刷类     |  Glass & Floor Brushes
CD    |  除尘类          |  Dusters
MB    |  抹布类          |  Cleaning Cloths
QC    |  车用类          |  Car Care
CW    |  宠物类          |  Pet Care
W     |  外购类          |  Outsourced Products
```

**自动创建分类逻辑：**
- 导入产品时，如品名为 "MK008-清洁套装"
- 系统自动提取前缀 "MK"
- 如果 categories 表中不存在 code="MK"
- 自动插入新记录：
  ```
  code: "MK"
  name: "MK类"
  name_en: "MK Category"
  is_auto_created: true
  sort_order: 999 (默认排最后)
  ```
- 提示管理员完善新分类信息

#### 7. homepage_featured (首页精选系列展示位表) ⭐⭐新增
```
- id (主键)
- group_id (关联的SKU组ID - 外键) ⭐⭐
- featured_image (展示图片URL)
- title_zh (标题 - 中文)
- title_en (标题 - 英文)
- description_zh (描述 - 中文)
- description_en (描述 - 英文)
- sort_order (排序，1-4)
- status (状态: active/inactive)
- created_at
- updated_at
```

**使用示例：**
```json
{
  "id": 1,
  "group_id": 123,  // 关联 MP007系列
  "featured_image": "/uploads/homepage/featured-mp007.jpg",
  "title_zh": "专业清洁套装",
  "title_en": "Professional Cleaning Kit",
  "description_zh": "高效清洁，品质保证",
  "description_en": "Efficient cleaning, quality assurance",
  "sort_order": 1,
  "status": "active"
}
```

**前端展示逻辑：**
```
当前语言为中文 → 显示 title_zh, description_zh
当前语言为英文 → 显示 title_en, description_en
点击展示位 → 跳转到 /products/{group.prefix}
```

#### 8. system_settings (系统设置表) ⭐更新
```
- id (主键)
- key (设置键名，唯一)
- value (设置值 - JSON格式)
- created_at
- updated_at
```

**多语言相关设置：**
```json
{
  "key": "site_info",
  "value": {
    "company_name_zh": "东阳市铭品日用品有限公司",
    "company_name_en": "Dongyang Mingpin Daily Products Co., Ltd.",
    "address_zh": "浙江省东阳市...",
    "address_en": "Dongyang City, Zhejiang Province...",
    "phone": "+86-xxx-xxxx",
    "email": "info@lemopx.com",
    "default_language": "zh",
    "supported_languages": ["zh", "en"]
  }
}
```

---

## 四、技术选型

### 前端
- Next.js 14（React框架）
- TypeScript
- Tailwind CSS（保持UI设计风格）
- **next-i18next 或 react-i18next**（国际化/多语言支持）⭐⭐新增
- Zustand（状态管理）
- Axios（HTTP客户端）

**多语言实现方案：**
- 使用 next-i18next 实现前端UI文本国际化
- 支持中文（zh）和英文（en）切换
- 语言选择器放置在网站顶部导航栏
- 语言切换后，URL变化：`/zh/products` ↔ `/en/products`
- 用户选择的语言保存在浏览器 localStorage
- 产品数据从数据库读取对应语言字段

### 后端
- Next.js API Routes 或 Node.js + Express
- TypeScript
- PostgreSQL（关系型数据库）
- Prisma ORM
- JWT（认证）
- xlsx（Excel文件处理）

### 文件存储
- 本地存储（开发）
- 阿里云 OSS（生产）

---

## 五、开发优先级

### Phase 1：核心功能（3-4周）

**后台优先：**
1. 管理员登录
2. 从ERP导入产品功能 ⭐核心
3. 商品管理（上架/下架/填写单价）
4. 分类管理
5. 业务员账号管理

**前台核心：**
6. 业务员登录
7. 产品列表（展示组件颜色）
8. 产品详情（组件颜色选择）⭐核心
9. 购物车
10. 下单页面（填写客户信息和订单参数）⭐核心
11. 订单确认页（编辑+打印）⭐核心
12. 订单提交

**订单管理：**
13. 后台订单列表
14. 订单详情/编辑 ⭐核心
15. 打印订单功能 ⭐
16. 导出订单表格 ⭐

### Phase 2：增强功能（1-2周）
1. 业务员工作台
2. 订单历史查询
3. 订单复制功能
4. 数据统计报表
5. 批量操作优化

---

## 六、重要说明 (2025-10-31更新)

### 1. 关于品号前缀分组与规格管理 ⭐⭐核心逻辑

```
关键规则：
✅ 品号前缀相同的产品自动归为一个SKU组（如 MP007-xxx → MP007系列）
✅ 每个货品规格对应一套图片（1-5张）和1个视频（可选）
✅ 后台上传几张图片，前端就显示几张（灵活配置）
✅ 用户选择不同规格，自动切换对应的图片集和视频
✅ 颜色信息从"附加属性"字段提取，每个部件可能有多种颜色

数据导入逻辑：
1. 管理员上传产品表格（Excel格式）
2. 系统自动提取品号前缀（如 MP007、TB001）
3. 按品号前缀自动分组，创建 product_groups
4. 每行数据作为一个货品规格，创建 product_skus
5. 默认状态为"未上架"

后台配置逻辑：
1. 管理员进入SKU组编辑页面
2. 查看该组下所有货品规格
3. 为每个规格配置图片集（拖拽排序，1-5张）
4. 为每个规格上传视频（可选，最多1个）
5. 为每个规格填写销售单价
6. 设置上架状态

前端展示逻辑：
1. 产品列表：按SKU组展示（如"MP007系列"）
2. 产品详情：显示规格选择器
3. 用户选择规格 → 切换对应的图片集和视频
4. 从附加属性提取颜色选项供用户选择
5. 加入购物车时，记录具体的SKU编码和选择的规格
```

### 2. 关于表格导入格式

**Excel表格必需列：**
- ✅ 备注：系统状态标识（如"方案一"/"方案二"）
- ✅ 创建日期：YYYY-MM-DD格式
- ✅ 品号：SKU编码（如 C10.01.0013）
- ✅ 品名：产品名称（如 MP007-清洁四件套）
- ✅ 商标：品牌标识
- ✅ 货品规格：详细规格描述（支持多行文本）
- ✅ 附加属性：部件和颜色信息（格式: A:...; B:...; C:...; D:...）

**品号前缀分类：**
```
MP - 组合套装
TB - 拖把类
T - 杆件
B - 拖把头
S - 刷类
CG - 玻璃&地刷类
CD - 除尘类
MB - 抹布类
QC - 车用类
CW - 宠物类
W - 外购类
```

### 3. 关于图片和视频管理 ⭐⭐核心

**图片规则：**
- ✅ 每个货品规格独立配置图片集
- ✅ 最少1张，最多5张
- ✅ 后台上传几张，前端就显示几张（灵活配置）
- ✅ 支持拖拽排序
- ✅ 支持格式：JPG、PNG、WebP
- ✅ 单张最大：5MB
- ✅ 推荐尺寸：1200x1200px

**视频规则：** ⭐⭐新增复用功能
- ✅ 支持两种模式：**SKU组共用** 或 **单独配置**
  - **SKU组共用模式**：
    - 一个视频应用于该SKU组下所有规格
    - 节省存储空间和上传时间
    - 适合所有规格展示内容相同的场景
  - **单独配置模式**：
    - 每个规格可以选择使用共用视频或上传独立视频
    - 更灵活，支持精准展示不同规格的特点
    - 可随时切换为使用共用视频
- ✅ 支持格式：MP4、WebM
- ✅ 最大文件：50MB
- ✅ 推荐分辨率：1920x1080
- ✅ 视频为可选项（可以不上传）
- ✅ 自动生成视频缩略图
- ✅ 可随时在后台切换复用模式

**视频使用逻辑：**
```
场景1：SKU组共用模式
- 管理员上传一个视频到SKU组
- 该组下所有规格自动使用此视频
- 前端：用户切换规格时，视频不变

场景2：单独配置模式
- 规格A：使用共用视频 ✓
- 规格B：上传独立视频 (video-b.mp4)
- 规格C：上传独立视频 (video-c.mp4)
- 前端：用户切换规格时，视频跟随切换

场景3：混合模式（推荐）
- 先上传SKU组共用视频作为默认
- 对需要特殊展示的规格，单独上传独立视频
- 其他规格继续使用共用视频
```

**前端切换逻辑：**
- ✅ 用户选择规格A → 显示规格A的图片集 + 对应视频
- ✅ 用户选择规格B → 显示规格B的图片集 + 对应视频
- ✅ 图片支持缩略图预览和大图查看
- ✅ 视频支持在线播放

### 4. 关于订单字段
- ✅ 当前已确认：数量、箱数、纸卡编码、摘要、预交日、备注
- ✅ 完整字段列表后续提供
- ✅ 订单支持全部编辑（客户信息、订单参数、商品）

### 5. 关于打印和导出 ⭐⭐已确认

**订单导出Excel格式** (参考 sale_table.xls)：

**表格结构：**
```
第1行：公司名称（东阳市铭品日用品有限公司）- 居中
第2行：标题（销售订单）- 居中
第3-4行：空行
第5行：字段分类标注
  - 列A-P: "系统自带"
  - 列Q-AB: "销售填写"
第6行：列标题（28个字段）
第7行起：订单商品明细数据
最后一行：合计行（"自动合计总额"）
```

**28个导出字段（完整列表）：** ✅已确认
1. **项**（序号）- 系统自动生成
2. **品号** - 从产品SKU获取
3. **客户料号** - 销售填写（可选）
4. **[货品图片]** - 预留图片位置
5. **品名** - 从产品获取
6. **货品规格** - 从产品规格获取
7. **附加属性** - 从产品附加属性获取
8. **数量** - 销售填写
9. **包装换算** - 销售填写
10. **包装单位** - 销售填写（如"125箱"）
11. **重量单位** - 销售填写
12. **包装净重** - 销售填写
13. **包装毛重** - 销售填写
14. **包装类型** - 销售填写
15. **包装大小** - 销售填写
16. **厂商备注** - 销售填写
17. **预交日** - 销售填写（YYYY-MM-DD格式）
18. **单价** - 从产品价格获取
19. **未税本位币** - 自动计算（数量 * 单价）
20. **装箱数** - 销售填写
21. ***箱数*** - 销售填写（重点字段）
22. **包装方式** - 销售填写（如"单个卡头"）
23. **纸卡编码** - 销售填写
24. **水洗标编码** - 销售填写（如"有水洗标，无编码"）
25. **外箱编码** - 销售填写
26. **箱规** - 销售填写（如"74*44*20cm"）
27. **体积** - 销售填写（立方米）
28. **摘要** - 销售填写（备注信息）

**导出功能要求：**
- ✅ 支持单个订单导出
- ✅ 支持批量订单导出
- ✅ 保持固定的28列格式
- ✅ 自动计算合计金额
- ✅ 文件名格式：订单号_客户名称_日期.xls
- ✅ 支持 .xls 格式（Excel 97-2003）

### 6. 关于批量操作
- ✅ 后台支持SKU组批量上架
- ✅ 后台支持SKU组批量下架
- ✅ 批量上架时需为每个规格填写单价

### 7. 关于多语言支持 ⭐⭐新增核心功能

**支持语言：**
- ✅ 中文（简体）- zh
- ✅ 英文 - en
- ✅ 默认语言：中文

**多语言覆盖范围：**

**1. 前端UI文本（使用 i18n 翻译）：**
- ✅ 导航栏、按钮、表单标签
- ✅ 提示信息、错误信息
- ✅ 页面标题、面包屑
- ✅ 所有固定文本

**2. 数据库数据（存储中英文字段）：**
- ✅ SKU组名称：`group_name` (中文) / `group_name_en` (英文)
- ✅ SKU组描述：`description` (中文) / `description_en` (英文)
- ✅ 分类名称：`name` (中文) / `name_en` (英文)
- ✅ 首页展示位：`title_zh/title_en`, `description_zh/description_en`
- ✅ 系统设置：公司名称、地址、简介等（中英文）

**3. 不需要翻译的内容：**
- ❌ 品号、SKU编码（通用代码）
- ❌ 货品规格描述（技术规格，保持原文）
- ❌ 附加属性（技术参数，保持原文）
- ❌ 价格、数量（数字通用）

**语言切换逻辑：**
```
用户点击语言切换按钮：
1. 前端切换 i18n 语言环境
2. 更新 localStorage: language = 'zh' 或 'en'
3. 重新加载页面数据，获取对应语言字段
4. URL变化（可选）：
   - /products → /zh/products 或 /en/products

前端显示逻辑：
当前语言 === 'zh':
  - 显示 group_name, description, name
当前语言 === 'en':
  - 显示 group_name_en, description_en, name_en
```

**后台管理多语言：**
- ✅ 后台管理界面保持中文
- ✅ 编辑产品/分类/设置时，提供中英文输入框
- ✅ 英文字段为可选，未填写时前端显示中文

### 8. 关于首页精选系列展示位 ⭐⭐新增核心功能

**功能说明：**
- ✅ 首页展示4个精选SKU系列
- ✅ 每个展示位可独立配置
- ✅ 支持中英文标题和描述
- ✅ 点击展示位跳转到对应SKU组详情页

**配置方式：**
- ✅ 后台系统设置 → 首页设置 → 精选系列配置
- ✅ 从已上架的SKU组中选择
- ✅ 上传展示图片（推荐尺寸：1200x600px）
- ✅ 填写中英文标题和描述
- ✅ 设置显示顺序（1-4）
- ✅ 启用/禁用状态

**跳转规则：**
```
展示位关联 MP007系列
→ 跳转到 /products/MP007
→ 显示该系列的所有规格、图片、视频
→ 用户可选择具体规格下单
```

**前端展示效果：**
```
首页精选区域：
┌──────────────────────────────────────┐
│  [精选系列 / Featured Series]        │
│                                      │
│  ┌────────┐  ┌────────┐             │
│  │ MP007  │  │ TB009  │             │
│  │ 系列1  │  │ 系列2  │             │
│  └────────┘  └────────┘             │
│                                      │
│  ┌────────┐  ┌────────┐             │
│  │ S001   │  │ MK008  │             │
│  │ 系列3  │  │ 系列4  │             │
│  └────────┘  └────────┘             │
└──────────────────────────────────────┘
```

---

## 七、待确认事项 (2025-10-31更新)

### 1. 表格导入细节
- [x] 确认Excel表格的确切列名和格式 ✅ 已确认（2025-10-31）
- [x] 确认品号前缀分类规则 ✅ 已确认（2025-10-31）
- [ ] 确认附加属性字段的详细解析规则
- [ ] 确认颜色信息的提取和展示方式

### 2. 图片和视频管理
- [x] 确认每个规格的图片数量（1-5张）✅ 已确认（2025-10-31）
- [x] 确认视频支持（每个规格1个）✅ 已确认（2025-10-31）
- [ ] 确认图片和视频的存储方式（本地/云存储）
- [ ] 确认图片压缩和优化策略

### 3. 订单字段
- [ ] 提供完整的订单字段列表
- [ ] 明确哪些字段必填，哪些选填
- [ ] 确认字段的数据类型和格式

### 4. 打印模板
- [ ] 提供订单打印模板格式
- [ ] 确认打印内容和布局

### 5. 导出模板
- [ ] 提供订单导出表格的模板格式
- [ ] 确认导出的字段和顺序

---

**文档版本：** v3.0 (重大更新)
**创建日期：** 2025-10-25
**最后更新：** 2025-10-31
**更新内容：**
- ✅ 产品数据源从ERP改为外部Excel表格导入
- ✅ SKU分组逻辑从"组件颜色组合"改为"品号前缀分组"
- ✅ 新增11种产品分类（MP/TB/T/B/S/CG/CD/MB/QC/CW/W）
- ✅ 新增货品规格与图片视频关联管理
- ✅ 每个规格支持1-5张图片（灵活配置，支持编辑）⭐⭐
- ✅ 每个规格价格独立配置（支持编辑）⭐⭐
- ✅ 新增视频复用功能（SKU组共用 或 单独配置）⭐⭐
- ✅ 新增分类代码自动识别和自动创建功能 ⭐⭐
- ✅ 确认订单导出格式（28个字段，与 sale_table.xls 一致）⭐⭐
- ✅ 重新设计产品列表筛选功能 ⭐⭐
  - 保留：分类筛选、价格区间筛选、排序、搜索
  - 移除：材料筛选（数据不支持）、颜色筛选（多部件多颜色无法确定主颜色）
  - 价格筛选按SKU组最低价
- ✅ 新增SKU组计算字段（min_price、max_price、spec_count、main_image）⭐
- ✅ **新增多语言支持（中文/英文切换）** ⭐⭐⭐核心功能
  - 前端UI使用 i18n 国际化
  - 数据库字段支持中英文（SKU组名称、描述、分类名称等）
  - 语言切换按钮在顶部导航栏
- ✅ **新增首页精选系列展示位（4个）** ⭐⭐⭐核心功能
  - 可选择SKU组关联
  - 支持中英文标题和描述
  - 点击跳转到SKU组详情页
  - 后台可配置展示图片和内容
- ✅ 新增数据库表：homepage_featured（首页精选展示位）
- ✅ 更新数据库表结构（新增多语言字段）
- ✅ 更新后台管理功能（支持价格、图片、视频、多语言的编辑）

**状态：** 需求已更新，等待开发实施
